---
title: 2. 스프링 웹 개발의 기초
date: 2023-09-25 20:00:00 +09:00
categories: [Spring, Spring 입문]
tags: [Spring]
---

## :pushpin: 정적 컨텐츠

- 스프링 부트는 정적 컨텐츠 기능을 제공한다.

`resources/static/hello-static.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>hello</title>
  </head>
  <body>
    정적 컨텐츠 입니다.
  </body>
</html>
```

실행 : http://localhost:8080/hello-static.html

<img src="/geonwoo05.github.io/assets/img/정적 컨텐츠 동작.png">

먼저 controller에서 hello-static 관련 메서드가 있는 지 찾아보고 없으면 `resources/static/hello-static.html`이 있는 지 찾고 페이지를 반환한다.

<br/>

## :pushpin: MVC와 템플릿 엔진

- MVC : model, view, controller

`Controller`

```java
@GetMapping("hello-mvc")
public String helloMvc(@RequestParam("name") String name, Model model){
    model.addAttribute("name", name);
    return "hello-template";
}
```

<br/>

`View`

```html
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>hello</title>
  </head>
  <body>
    <p th:text="'hello.' + ${name}">안녕하세요. 손님</p>
  </body>
</html>
```

`실행: http://localhost:8080/hello-mvc?name=spring`

<br/>

해당 요청이 들어오면 톰캣 서버를 거치고 spring 컨테이너로 전달하고 viewResolver가 thymeleaf 엔진에게 넘기고 thymeleaf에서 랜더링 후 변환해서 웹 브라우저에게 넘겨준다.

<img src="/geonwoo05.github.io/assets/img/mvc,템플릿엔진.png">

## :pushpin: API 방식

#### 1. @ResponseBody 문자 반환

```java
@GetMapping("hello-string")
@ResponseBody
public String helloString(@RequestParam("name") String name){
    return "hello" + name;
}
```

- `@ResponseBody`를 사용하면 ViewResolver를 사용하지 않는다.
- 대신 HTTP의 Body에 문자 내용을 직접 반환한다.

<br/>

#### 2. @ResponseBody 객체 반환

`HelloController.class`

```java
@GetMapping("hello-api")
@ResponseBody
public Hello helloApi(@RequestParam("name") String name){
    Hello hello = new Hello();
    hello.setName(name);
    return hello;
}

public class Hello {
    private String name;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}
```

- 위 처럼 `@ResponseBody`를 사용하고 객체를 반환하면 객체가 JSON으로 반환된다.

#### 3. @ResponseBody의 사용원리

<img src="/geonwoo05.github.io/assets/img/responsebody&apos;.png">

<br/>

스프링에서 @ResponseBody가 있으면 HttpMessageConverter가 동작하고 객체면 JsonConverter가 동작하고 문자면 StringConverter가 동작한다.

- HTTP의 Body에 문자 내용을 직접 반환
- `ViewResolver` 대신 `HttpMessageConverter`가 동작한다
- 기본 문자처리 : `StringHttpMessageConverter`
- 기본 객체처리 : `MappingJackson2HttpMessageConverter`
- byte 처리 등등 기타 여러가지 HttpMessageConverter가 기본으로 등록되어 있다.
